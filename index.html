<!DOCTYPE html>
<html>
  <head>
    <title>The PURE.CSS Example</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css">    
    <style>
      body{
        background-color: lightgray;
      }
      .main {
        /*margin: 2em auto;
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;     
        font-size: small; 
        font-family: Roboto, 'Liberation Mono', Courier, monospace;
        text-align: center;     
           */
        font-size: medium; 
        font-family: Roboto, 'Liberation Mono', Courier, monospace;
        width: 1600px;  
        background-color: white;   
        margin: auto;
        padding: 50px;
        padding-top: 35px;
      }
      .vega-bind {
        font-size:small;
      }
      
      .text {
      	text-align: left;
        padding-left: 2em;
      }
      .annotation {
        text-align: center;
        font-style: italic;
      }
      h1 {
        text-align:center;
      }
      .center {
        text-align: justify;
        justify-content: center; 
        margin: auto;
      }
      .highlight {
        background-color: red;
        /*display:flex;
        justify-content: center;
        margin:auto;*/
      }
      #vlBasicDevResearch {
        margin:auto;
      }
      .margin-below {
        margin-bottom: 100px;
      }
      button {
        transition-duration: 0.4s;
        border-radius:0%;
        border:none;
      }
      button:hover {
        background-color: darkgray;
        color: white;
        border:none;
      }
      button:focus{
        background-color: darkgray;
        color:white;
        border:none;
        outline:none;
      }
    </style>
    <style media="screen">
      .vega-actions a {
        margin-right: 5px;
      }
    </style>
	  <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>
  </head>


  <body>
  	<div class="main">
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <h1>
            Rise of the Service Economy
          </h1>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            Economist Victor R. Fuchs described in 1968 the rise of a 'service economy' spreading out from North America. Services did indeed continue to increase as a percentage of economic output throughout the world - today most 'advanced' economies are dominated by services.
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-2-3">
          <div id="visOutputComp"></div>
        </div>
        <div class="pure-u-1-3">
          <div class="pure-g">
            <div class="pure-u-1">
              <div id="visServicesOverTime"></div>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1">
              <div id="visServicesOverTime2"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <h1>
            A Race for Innovation
          </h1>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g center">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
          <p>
            As advanced-economy service sectors surged, commentators pointed to new transformations in labour and drivers of growth. 
            Scientific and technological innovation alongside higher-skilled, networked workers were giving rise to the 'knowledge economy' and the 'information economy'. The research capacity of a population increasingly tied to its ability to compete.
            <br>
          </p>
        </div>
        <div class="pure-u-1-3"></div>
      </div>
      <div class="pure-g">
        <div class="pure-u-1">
          <div class="pure-g">
            <div class="pure-u-1" style="margin:0">
              <p style="font-size:11px;font-style:italic;">
                Select a view below, and click in the map to highlight (hold shift to select multiple).
              </p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1", style="margin-left:30px">
              <button id="effortButton" onclick="showResearchMap('effort')">Research Effort</button>
              <button id="fundingButton" onclick="showResearchMap('funding')">Research Funding</button>
              <button onclick="showResearchMap('activity')">Research Activity</button>
              <p></p>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1" style="display: flex; justify-content: center;">
              <div id="visResearchMapActivity"></div>
              <div id="visResearchMapEffort"></div>
              <div id="visResearchMapFunding"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="pure-g" style="padding-top: 10px;">
        <div class="pure-u-1" style="display: flex; justify-content: center;">
          <div id="visResearchImpacts"></div>
        </div>
      </div>
    </div>
    <script>
      // Assign the specification to a local variable vlSpec.
      var vlOutputComparison = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json", "vconcat":[{"hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Services != 0 && datum.Services != null&& datum[\"income-group\"] != null"}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"Services","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"size":{"field":"GDP","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"Services","type":"nominal"},{"field":"economic-fitness","type":"nominal"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"firebrick","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Services != 0 && datum.Services != null&& datum[\"income-group\"] != null"},{"regression":"Services","on":"economic-fitness","as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300}]},{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Manufacturing != 0 && datum.Manufacturing != null&& datum[\"income-group\"] != null"}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"Manufacturing","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"size":{"field":"GDP","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"Manufacturing","type":"nominal"},{"field":"economic-fitness","type":"nominal"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"firebrick","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Manufacturing != 0 && datum.Manufacturing != null&& datum[\"income-group\"] != null"},{"regression":"Manufacturing","on":"economic-fitness","as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300}]}]},{"hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Industry != 0 && datum.Industry != null&& datum[\"income-group\"] != null"}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"Industry","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"size":{"field":"GDP","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"Industry","type":"nominal"},{"field":"economic-fitness","type":"nominal"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"firebrick","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Industry != 0 && datum.Industry != null&& datum[\"income-group\"] != null"},{"regression":"Industry","on":"economic-fitness","as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300}]},{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Agriculture != 0 && datum.Agriculture != null&& datum[\"income-group\"] != null"}],"encoding":{"x":{"field":"economic-fitness","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"Agriculture","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}},"size":{"field":"GDP","type":"quantitative","legend":null,"scale":{"range":[10,1000]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"Agriculture","type":"nominal"},{"field":"economic-fitness","type":"nominal"}]},"title":null,"width":400,"height":300},{"mark":{"type":"line","color":"firebrick","clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["income-group","region"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"datum.Year == 2014 && datum.Agriculture != 0 && datum.Agriculture != null&& datum[\"income-group\"] != null"},{"regression":"Agriculture","on":"economic-fitness","as":["regress-x","regress-y"]}],"encoding":{"x":{"field":"regress-x","type":"quantitative","axis":{"title":null},"scale":{"type":"sqrt"}},"y":{"field":"regress-y","type":"quantitative","axis":{"grid":false},"scale":{"domain":[0,100]}}},"title":null,"width":400,"height":300}]}]}],"title":{"text":"Sector % of GDP vs Economic Fitness","subtitle":["Economic Fitness is defined by the World Bank as \"a measure of a country's diversification and ability to produce complex good on a globally competitive scale\".","Many countries score very low (with a number rounding to zero at 6dp). They are presented here on a logarithmic scale.","Bigger bubbles have larger GDP. The red line is a linear regression."],"font":"Arial","subtitleFont":"Arial","fontSize":14,"subtitlePadding":7,"offset":10,"subtitleLineHeight":15}}
      var vlServicesOverTime = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","vconcat":[{"layer":[{"mark":{"type":"area","color":"lightgrey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018"},{"filter":"isValid(datum.Services) && datum.Services > 0"}],"encoding":{"x":{"field":"Year","type":"ordinal"},"y":{"field":"Services","type":"quantitative","aggregate":"average"}},"width":400},{"mark":{"type":"line","color":"#77A1C0"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'China' &&(datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018)"}],"encoding":{"x":{"field":"Year","type":"ordinal"},"y":{"field":"Services","type":"quantitative","axis":{"title":"Services (% of GDP)","grid":false}}},"width":400},{"mark":{"type":"text","color":"#77A1C0","align":"left","dy":-15,"dx":-35},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'China' && datum.Year==2018"}],"encoding":{"x":{"field":"Year","type":"ordinal"},"y":{"field":"Services","type":"quantitative","axis":{"grid":false}},"text":{"field":"Country Name","type":"nominal"}},"width":400},{"mark":{"type":"line","color":"green"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'United Kingdom' &&(datum.Year==1990 || datum.Year==2000 || datum.Year==2011 || datum.Year==2018)"}],"encoding":{"x":{"field":"Year","type":"ordinal"},"y":{"field":"Services","type":"quantitative","axis":{"title":"Services (% of GDP)","grid":false}}},"width":400},{"mark":{"type":"text","color":"green","align":"left","dy":-15,"dx":-35},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum[\"Country Name\"] == 'United Kingdom' && datum.Year==2018"}],"encoding":{"x":{"field":"Year","type":"ordinal"},"y":{"field":"Services","type":"quantitative","axis":{"grid":false}},"text":{"field":"Country Name","type":"nominal"}},"width":400}]}],"title":{"text":"A Transforming China","subtitle":["China is pushing its services sector to catch up with other \"advanced\" economies.","Grey area is the global average"],"font":"Arial","subtitleFont":"Arial","fontSize":14,"subtitlePadding":7,"offset":10,"subtitleLineHeight":15}}
      var vlResearchMapFunding =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Business enterprise %"]}},{"filter":"isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"}],"selection":{"sel62":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - financed by Business enterprise %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D Funding"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Business enterprise %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"albers"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Business enterprise %"]}},{"filter":"datum[\"GERD - financed by Business enterprise %\"] == 0 || datum[\"GERD - financed by Business enterprise %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"albers"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Business enterprise %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - financed by Business enterprise %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Business enterprise %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Funded by Domestic Business (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Government %"]}},{"filter":"isValid(datum[\"GERD - financed by Government %\"]) && datum[\"GERD - financed by Government %\"] > 0"}],"selection":{"sel62":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - financed by Government %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D Funding"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Government %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"albers"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Government %"]}},{"filter":"datum[\"GERD - financed by Government %\"] == 0 || datum[\"GERD - financed by Government %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"albers"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Government %\"]) && datum[\"GERD - financed by Government %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Government %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - financed by Government %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Government %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Funded by Government (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - financed by Rest of the world (abroad) %"]}},{"filter":"isValid(datum[\"GERD - financed by Rest of the world (abroad) %\"]) && datum[\"GERD - financed by Rest of the world (abroad) %\"] > 0"}],"selection":{"sel62":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D Funding"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Rest of the world (abroad) %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"albers"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Rest of the world (abroad) %"]}},{"filter":"datum[\"GERD - financed by Rest of the world (abroad) %\"] == 0 || datum[\"GERD - financed by Rest of the world (abroad) %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"albers"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - financed by Rest of the world (abroad) %\"]) && datum[\"GERD - financed by Rest of the world (abroad) %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - financed by Rest of the world (abroad) %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - financed by Rest of the world (abroad) %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - financed by Rest of the world (abroad) %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel62"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Funded by Foreign Interests (% of R&D)"}]}
      var vlResearchMapActivity =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Basic research %"]}},{"filter":"isValid(datum[\"GERD - Basic research %\"]) && datum[\"GERD - Basic research %\"] > 0"}],"selection":{"sel63":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - Basic research %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Basic research %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"equalEarth"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Basic research %"]}},{"filter":"datum[\"GERD - Basic research %\"] == 0 || datum[\"GERD - Basic research %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"equalEarth"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Basic research %\"]) && datum[\"GERD - Basic research %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Basic research %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - Basic research %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Basic research %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Basic Research (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Applied research %"]}},{"filter":"isValid(datum[\"GERD - Applied research %\"]) && datum[\"GERD - Applied research %\"] > 0"}],"selection":{"sel63":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - Applied research %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Applied research %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"equalEarth"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Applied research %"]}},{"filter":"datum[\"GERD - Applied research %\"] == 0 || datum[\"GERD - Applied research %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"equalEarth"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Applied research %\"]) && datum[\"GERD - Applied research %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Applied research %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - Applied research %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Applied research %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Applied Research (% of R&D)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD - Experimental development %"]}},{"filter":"isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"}],"selection":{"sel63":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD - Experimental development %","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"% of R&D"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Experimental development %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":300,"projection":"equalEarth"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %"]}},{"filter":"datum[\"GERD - Experimental development %\"] == 0 || datum[\"GERD - Experimental development %\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"width":450,"height":300,"projection":"equalEarth"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"calculate":"toNumber(datum[\"GERD - Experimental development %\"])","as":"numField"}],"encoding":{"color":{"field":"GERD - Experimental development %","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"domain":[0,100]}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD - Experimental development %","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel63"},"value":0.8},"value":0.1}},"title":null,"width":450,"height":100,"projection":"albers"}],"title":"Experimental Development (% of R&D)"}]}
      var vlResearchMapEffort =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"Researchers per million inhabitants (FTE)\"]) && datum[\"Researchers per million inhabitants (FTE)\"] > 0"}],"selection":{"sel55":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"# per Million"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"Researchers per million inhabitants (FTE)","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"title":null,"width":420,"height":300,"projection":"albers"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Researchers per million inhabitants (FTE)"]}},{"filter":"datum[\"Researchers per million inhabitants (FTE)\"] == 0 || datum[\"Researchers per million inhabitants (FTE)\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"width":420,"height":300,"projection":"albers"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"Researchers per million inhabitants (FTE)\"]) && datum[\"Researchers per million inhabitants (FTE)\"] > 0"},{"calculate":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"])","as":"numField"}],"encoding":{"color":{"field":"Researchers per million inhabitants (FTE)","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"type":"sqrt"}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"Researchers per million inhabitants (FTE)","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"title":null,"width":420,"height":100,"projection":"albers"}],"title":"Researchers per Million Inhabitants (FTE)"},{"vconcat":[{"layer":[{"mark":{"type":"geoshape","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["Country","GERD per capita (in current PPP$)"]}},{"filter":"isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"}],"selection":{"sel55":{"type":"multi","fields":["Country"]}},"encoding":{"color":{"field":"GERD per capita (in current PPP$)","type":"quantitative","legend":{"type":"gradient","gradientLength":300,"direction":"horizontal","orient":"bottom","title":"PPP$ per Capita"},"scale":{"type":"quantile"}},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD per capita (in current PPP$)","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"title":null,"width":420,"height":300,"projection":"albers"},{"mark":{"type":"geoshape","fill":"#ababab"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/world.lowres.json","format":{"type":"topojson","feature":"ne_110m_admin_0_countries"}},"transform":[{"filter":"datum.properties.ISO_A3 != \"ATA\""},{"lookup":"properties.ISO_A3","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD per capita (in current PPP$)"]}},{"filter":"datum[\"GERD per capita (in current PPP$)\"] == 0 || datum[\"GERD per capita (in current PPP$)\"] == null"}],"encoding":{"tooltip":{"value":"No Data Available"},"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"width":420,"height":300,"projection":"albers"}]},{"mark":{"type":"bar","stroke":"grey"},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"filter":"isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"calculate":"toNumber(datum[\"GERD per capita (in current PPP$)\"])","as":"numField"}],"encoding":{"color":{"field":"GERD per capita (in current PPP$)","type":"quantitative","legend":null,"scale":{"type":"quantile"}},"y":{"field":"numField","type":"quantitative","axis":{"title":null,"tickCount":5},"scale":{"type":"sqrt"}},"x":{"field":"CountryCode","type":"nominal","sort":"y","axis":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"GERD per capita (in current PPP$)","type":"nominal"}],"opacity":{"condition":{"test":{"selection":"sel55"},"value":0.8},"value":0.1}},"title":null,"width":420,"height":100,"projection":"albers"}],"title":"Research Expenditure per Capita (PPP$)"}],"resolve":{"scale":{"color":"independent"}}}
      var vlBasicVsDevResearch =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","vconcat":[{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend"}},"width":450,"height":370,"title":null,"encoding":{"size":{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":null,"scale":{"domain":[0,2500],"range":[30,800]},"legend":null},"tooltip":[{"field":"Country","type":"nominal"},{"field":"Experimental development (% R&D Expenditure)","type":"nominal"},{"field":"Basic research (% R&D Expenditure)","type":"nominal"},{"field":"Researchers per million inhabitants (FTE)","type":"nominal"},{"field":"R&D expenditure per capita (in current PPP$)","type":"nominal"}]}},{"mark":{"type":"text","align":"left","dy":-5,"dx":15,"baseline":"left"},"transform":[{"filter":"datum.Country==\"United States\" || datum.Country==\"Japan\" ||datum.Country==\"Switzerland\" || datum.Country==\"Republic of Korea\" ||datum.Country==\"Israel\""}],"encoding":{"text":{"field":"Country","type":"nominal"}}},{"mark":{"type":"text","align":"left","dy":-8,"dx":0,"baseline":"left"},"transform":[{"filter":"datum.Country==\"China\" || datum.Country==\"India\" ||datum.Country==\"Qatar\" || datum.Country==\"Malta\""}],"encoding":{"text":{"field":"Country","type":"nominal"}}}],"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"datum[\"GERD - Experimental development %\"] != 0&& datum.region != null&& toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":"selectRegion","value":0.7},"value":0.15},"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% R&D expenditure)","axis":{"grid":false},"scale":{"domain":[0,90]}},"y":{"field":"GERD - Basic research %","type":"quantitative","title":"Basic Research (% R&D expenditure)","axis":{"grid":false},"scale":{"domain":[0,60]}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}}}}],"params":[{"name":"SelectResearcherCount","value":0,"bind":{"input":"range","min":0,"max":6000,"step":1,"name":"Minimum # Researchers per Million Inhabitants"}}],"title":{"text":"Composition of R&D by Activity","subtitle":["Bubbles closer to the origin spend more on Applied Research.","Bigger bubbles spend more per capita ($PPP)."],"font":"Arial","subtitleFont":"Arial","fontSize":14,"subtitlePadding":7,"offset":10,"subtitleLineHeight":15}}
      var vlResearchMetricsImpact =
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}}],"encoding":{"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"range":[10,1000]},"legend":null},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - Experimental development %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - Experimental development %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Business enterprise %"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}}],"encoding":{"x":{"field":"GERD - financed by Business enterprise %","type":"quantitative","title":"R&D Funded by Business (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"range":[10,1000]},"legend":null},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - financed by Business enterprise %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - financed by Business enterprise %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD per capita (in current PPP$)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}}],"encoding":{"x":{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":"R&D Funding per Capita (PPP$)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"range":[10,1000]},"legend":null},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD per capita (in current PPP$)","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"regression":"economic-fitness","extent":[0,2400],"on":"GERD per capita (in current PPP$)","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350}]}
      var vlResearchImpacts = 
      {"$schema":"https://vega.github.io/schema/vega-lite/v4.json","hconcat":[{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"domain":[0,10],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - Experimental development %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - Experimental development %\"]) && datum[\"GERD - Experimental development %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - Experimental development %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - financed by Business enterprise %","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - financed by Business enterprise %","type":"quantitative","title":"R&D Funded by Business (% of R&D)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"domain":[0,10],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD - financed by Business enterprise %","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD - financed by Business enterprise %\"]) && datum[\"GERD - financed by Business enterprise %\"] > 0"},{"regression":"economic-fitness","extent":[0,90],"on":"GERD - financed by Business enterprise %","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350},{"layer":[{"mark":{"type":"point","filled":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD per capita (in current PPP$)","Researchers per million inhabitants (FTE)"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount"}],"encoding":{"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD per capita (in current PPP$)","type":"quantitative","title":"R&D Funding per Capita (PPP$)","scale":{"type":"sqrt"}},"y":{"field":"economic-fitness","type":"quantitative","title":"Economic Fitness","scale":{"domain":[0,10],"type":"sqrt"}},"size":{"field":"GDP","type":"quantitative","scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5,"orient":"top"},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}},"tooltip":[{"field":"Country Name","type":"nominal"},{"field":"region","type":"nominal"},{"field":"GDP","type":"nominal"},{"field":"economic-fitness","type":"nominal"},{"field":"GERD per capita (in current PPP$)","type":"nominal"}]}},{"mark":{"type":"line","color":"darkgrey","strokeDash":[4,4],"clip":true},"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"transform":[{"lookup":"CountryCode","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/economic_fitness_2014.csv","format":{"type":"csv","parse":{"economic-fitness":"number"}}},"key":"country-code","fields":["economic-fitness"]}},{"filter":"isValid(datum[\"economic-fitness\"]) &&isValid(datum[\"GERD per capita (in current PPP$)\"]) && datum[\"GERD per capita (in current PPP$)\"] > 0"},{"regression":"economic-fitness","extent":[0,2400],"on":"GERD per capita (in current PPP$)","as":["rx","ry"]}],"encoding":{"x":{"field":"rx","type":"quantitative"},"y":{"field":"ry","type":"quantitative","scale":{"domain":[0,9]}}}}],"width":300,"height":350},{"mark":{"type":"point","filled":true,"tooltip":true},"selection":{"selectRegion":{"type":"multi","fields":["region"],"bind":"legend","on":"click","clear":"dblclick"},"selectRegionClick":{"fields":["Country Name"],"type":"single","on":"mouseover"}},"width":300,"height":350,"title":null,"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/cleaned_wdi_economic_output_breakup.csv","format":{"type":"csv","parse":{"Year":"number","GDP":"number","Industry":"number","Manufacturing":"number"}}},"transform":[{"filter":"datum.Year==2014"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/research-stats.csv","format":{"type":"csv"}},"key":"CountryCode","fields":["GERD - Experimental development %","GERD - Basic research %","Researchers per million inhabitants (FTE)"]}},{"filter":"toNumber(datum[\"Researchers per million inhabitants (FTE)\"]) > SelectResearcherCount &&isValid(datum[\"GERD - Experimental development %\"]) &&datum[\"GERD - Experimental development %\"] != 0 &&isValid(datum[\"GERD - Basic research %\"]) &&datum[\"GERD - Basic research %\"] != 0"},{"lookup":"Country Code","from":{"data":{"url":"https://raw.githubusercontent.com/joel-brand/FIT3179/main/data/countries.csv","format":{"type":"csv"}},"key":"country-code","fields":["region"]}},{"filter":"isValid(datum.region)"}],"encoding":{"size":{"field":"GDP","type":"quantitative","title":null,"legend":null,"scale":{"domain":[0,100000000000000],"range":[0,1000],"type":"pow","exponent":0.5}},"opacity":{"condition":{"selection":{"or":["selectRegionClick","selectRegion"]},"value":0.7},"value":0.15},"x":{"field":"GERD - Experimental development %","type":"quantitative","title":"Experimental Development (% R&D expenditure)","axis":{"grid":false},"scale":{"domain":[0,90]}},"y":{"field":"GERD - Basic research %","type":"quantitative","title":"Basic Research (% R&D expenditure)","axis":{"grid":false},"scale":{"domain":[0,60]}},"color":{"field":"region","type":"nominal","title":"Region","legend":{"offset":5},"scale":{"domain":["East Asia & Pacific","Europe & Central Asia","Latin America & Caribbean","Middle East & North Africa","North America","South Asia","Sub-Saharan Africa"],"range":["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#f781bf","#a65628"]}}}}],"params":[{"name":"SelectResearcherCount","value":0,"bind":{"input":"range","min":0,"max":6000,"step":1,"name":"Minimum # Researchers per Million Inhabitants"}}],"title":{"text":"Show Me The Money!","subtitle":["R&D focus on Experimental Development and higher research funding from businesses correlates with better economic fitness.","Hover over any datapoint to highlight, or click a region in the legend (shift to click multiple).","Use the slider below to filter out countries with less researchers."],"font":"Arial","subtitleFont":"Arial","fontSize":14,"subtitlePadding":7,"offset":10,"subtitleLineHeight":15}}
      // Embed the visualization in the container with id `vis`
      var opts = {actions:false}
      vegaEmbed('#visOutputComp', vlOutputComparison, opts)
      vegaEmbed('#visServicesOverTime', vlServicesOverTime, opts)
      vegaEmbed('#visServicesOverTime2', vlServicesOverTime, opts)
      vegaEmbed('#visResearchMapFunding', vlResearchMapFunding, opts)
      vegaEmbed('#visResearchMapActivity', vlResearchMapActivity, opts)
      vegaEmbed('#visResearchMapEffort', vlResearchMapEffort, opts)
      //vegaEmbed('#visBasicVsDev', vlBasicVsDevResearch, opts)
      //vegaEmbed('#visResearchMetricImpacts', vlResearchMetricsImpact, opts)
      vegaEmbed('#visResearchImpacts', vlResearchImpacts, opts)
      function showResearchMap(name) {
        var effortMap = document.getElementById("visResearchMapEffort");
        var fundingMap = document.getElementById("visResearchMapFunding");
        var activityMap = document.getElementById("visResearchMapActivity");
        effortMap.style.display = (name=="effort") ? "block" : "none";
        fundingMap.style.display = (name=="funding") ? "block" : "none";
        activityMap.style.display = (name=="activity") ? "block" : "none";
      }
      window.addEventListener("load", function(){
          var fundingMapButton = document.getElementById("fundingButton");
          showResearchMap("funding");
          fundingMapButton.focus();
          window.scrollTo(0,0);
      });
    </script>
  </body>
</html>  


